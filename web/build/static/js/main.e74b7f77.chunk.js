(this.webpackJsonpvide_viewer_fe=this.webpackJsonpvide_viewer_fe||[]).push([[0],{78:function(e,t,n){},80:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(11),s=n.n(i),l=(n(78),n(30)),r=(n(79),n(128)),o=n(126),d=(n(80),window.location.protocol+"//"+window.location.hostname),j=d+":5000"+"/api/",u=n(117),v=n(3);function b(e){var t=e.stream;return Object(v.jsx)(u.a,{className:"d-flex",children:Object(v.jsx)("img",{className:"ms-auto me-auto w-100",style:{maxHeight:"calc(100vh - 70px)"},src:t})})}var h=n(37),x=n.n(h),O=n(47),m=n(49),f=n(118),p=n(129),w=n(124),y=n(127);function g(e){var t=e.name,n=e.value;return Object(v.jsxs)("tr",{children:[Object(v.jsxs)("td",{className:"fw-bold",style:{width:"200px"},children:[t,":"]}),Object(v.jsx)("td",{className:"text-end",children:n})]})}function N(e){var t,n,a,i,s,r,o,d,u=Object(c.useState)(),b=Object(l.a)(u,2),h=b[0],N=b[1],k=e.options,C=e.onChangeOptions;function S(){return(S=Object(m.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j+"params");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,N(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=setInterval((function(){!function(){S.apply(this,arguments)}()}),5e3);return function(){return clearInterval(e)}}),[e]),console.log("opt",k),Object(v.jsxs)("div",{className:"w-auto me-2",children:[Object(v.jsxs)("div",{className:"border p-2"+((null===e||void 0===e?void 0:e.showType)?"":" d-none"),children:[Object(v.jsxs)(f.a,{className:"m-2 w-100",variant:"standard",sx:{m:1,minWidth:120},children:[Object(v.jsx)(p.a,{id:"type-label",children:"\u0422\u0438\u043f"}),Object(v.jsxs)(w.a,{labelId:"type-label",id:"type-select",value:null===k||void 0===k?void 0:k.type,label:"\u0422\u0438\u043f",variant:"standard",sx:{width:400},onChange:function(e){return null===C||void 0===C?void 0:C(Object(O.a)(Object(O.a)({},k),{},{type:e.target.value}))},children:[Object(v.jsx)(y.a,{value:"raw",children:"raw"}),Object(v.jsx)(y.a,{value:"detected",children:"detected"})]})]}),Object(v.jsxs)(f.a,{className:"m-2 w-100",variant:"standard",sx:{m:1,minWidth:120},children:[Object(v.jsx)(p.a,{id:"size-label",children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),Object(v.jsxs)(w.a,{labelId:"size-label",id:"size-select",value:null===k||void 0===k?void 0:k.size,label:"\u0420\u0430\u0437\u043c\u0435\u0440",variant:"standard",sx:{width:400},onChange:function(e){return null===C||void 0===C?void 0:C(Object(O.a)(Object(O.a)({},k),{},{size:e.target.value}))},children:[Object(v.jsx)(y.a,{value:"720",children:"720p"}),Object(v.jsx)(y.a,{value:"540",children:"540p"}),Object(v.jsx)(y.a,{value:"480",children:"480p"}),Object(v.jsx)(y.a,{value:"360",children:"360p"})]})]})]}),Object(v.jsx)("div",{className:"border p-2",children:Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)(g,{name:"read fps",value:null===h||void 0===h||null===(t=h.read_fps)||void 0===t||null===(n=t.toFixed)||void 0===n?void 0:n.call(t,3)}),Object(v.jsx)(g,{name:"detect fps",value:null===h||void 0===h||null===(a=h.detect_fps)||void 0===a||null===(i=a.toFixed)||void 0===i?void 0:i.call(a,3)}),Object(v.jsx)(g,{name:"yolo time",value:null===h||void 0===h||null===(s=h.yolo_time)||void 0===s||null===(r=s.toFixed)||void 0===r?void 0:r.call(s,3)}),Object(v.jsx)(g,{name:"DeepSort time",value:null===h||void 0===h||null===(o=h.deep_sort_time)||void 0===o||null===(d=o.toFixed)||void 0===d?void 0:d.call(o,3)}),Object(v.jsx)(g,{name:"\u0417\u0430\u043f\u0438\u0441\u044c",value:!0===(null===h||void 0===h?void 0:h.is_saving)?"on":"off"})]})})})]})}var k=n(125),C=n(122),S=n(123),_=n(69),z=n.n(_);function F(e){var t=e.show,n=e.url,c=e.onClose,a=e.name;return console.log(n),Object(v.jsxs)(k.a,{show:t,onHide:function(){return null===c||void 0===c?void 0:c()},size:"xl",children:[Object(v.jsx)(k.a.Header,{closeButton:!0,children:Object(v.jsx)(k.a.Title,{children:a})}),Object(v.jsx)(k.a.Body,{children:Object(v.jsx)("video",{className:"ms-auto me-auto w-100",style:{maxHeight:"calc(100vh - 70px)"},controls:!0,src:n})})]})}function H(e){var t,n=Object(c.useState)(),a=Object(l.a)(n,2),i=a[0],s=a[1],r=Object(c.useState)({show:!1,url:null}),o=Object(l.a)(r,2),d=o[0],b=o[1];function h(){return(h=Object(m.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j+"accidents");case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.json();case 7:n=e.sent,s(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){h.apply(this,arguments)}()}),[e]),Object(v.jsxs)(u.a,{children:[Object(v.jsxs)(C.a,{bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"fw-bold",children:[Object(v.jsx)("td",{children:"\u0412\u0440\u0435\u043c\u044f"}),Object(v.jsx)("td",{children:"\u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430"}),Object(v.jsx)("td",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})]})}),Object(v.jsx)("tbody",{children:null===i||void 0===i||null===(t=i.map)||void 0===t?void 0:t.call(i,(function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{className:"fw-bolder",children:null!=e.time?z()(1e3*e.time).format("DD.MM.YYYY HH:mm:ss.SSS"):""}),Object(v.jsx)("td",{children:e.filename}),Object(v.jsx)("td",{children:Object(v.jsx)(S.a,{onClick:function(){return b({show:!0,video:""+(null===e||void 0===e?void 0:e.path),name:null===e||void 0===e?void 0:e.filename})},children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c"})})]},t)}))})]}),Object(v.jsx)(F,{show:null===d||void 0===d?void 0:d.show,name:null===d||void 0===d?void 0:d.name,url:null===d||void 0===d?void 0:d.video,onClose:function(){b({show:!1})}})]})}var I=function(e){var t=Object(c.useState)(1),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)({size:"480",type:"detected"}),d=Object(l.a)(s,2),u=d[0],h=d[1];return Object(v.jsxs)("div",{children:[Object(v.jsxs)(r.a,{bg:"secondary",variant:"dark",className:"mb-1",children:[Object(v.jsx)("div",{onClick:function(){return i(0)},className:"navbar-brand"}),Object(v.jsxs)(o.a,{className:"mr-auto",children:[Object(v.jsx)("div",{onClick:function(){return i(1)},className:"nav-link cursor-pointer",children:"\u0417\u0430\u043f\u0438\u0441\u0438"}),Object(v.jsx)("div",{onClick:function(){return i(0)},className:"nav-link cursor-pointer",children:"\u0412\u0438\u0434\u0435\u043e"})]})]}),Object(v.jsxs)("div",{className:"d-flex mt-2",children:[0===a?Object(v.jsx)(b,{stream:j+"stream?type="+(null===u||void 0===u?void 0:u.type)+"&size="+(null===u||void 0===u?void 0:u.size)}):Object(v.jsx)(H,{}),Object(v.jsx)(N,{showType:0===a,options:u,onChangeOptions:function(e){return h(e)}})]})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root")),T()}},[[89,1,2]]]);
//# sourceMappingURL=main.e74b7f77.chunk.js.map